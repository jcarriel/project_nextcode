{% extends 'base.html.twig' %}

{% block body %} 
{% include('navbar.html.twig') %}
    <!-- Modal -->
	<div class="modal fade" data-backdrop="static" data-keyboard="false" id="myModal" tabindex="-1" role="dialog">
	  <div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
		  <div class="modal-header">
			<h4 class="modal-title" id="myModalLabel">Buscar productos</h4>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		  </div>
		  <div class="modal-body">
			<form class="form-horizontal">
			</form>
			<div class="outer_div text-center">
				<table id="tablaproductos" class="table table-striped table-bordered table-sm">
					<thead class="thead-dark">
						<tr>
							<th>ID</th>
							<th>DESCRIPCION</th>
							<th width="120">PRECIO</th>
							<th width="50">STOCK</th>
							<th width="50">CANTIDAD</th>
							<th width="50">AGREGAR</th>
						</tr>
					</thead>
					<tbody>
					{% for producto in productos %}
						<tr>
							<td>{{ producto.id }}</td>
							<td>{{ producto.descripcion }}</td>
							<td><input type="number" id="precio_venta" class="form-control" value="{{ producto.precio }}"></td>
							<td>{{ producto.stock }}</td>
							<td><input type="number" id="{{ producto.descripcion }}" class="form-control" min=0 oninput="validity.valid||(value='1');" onkeyup="stock({{ producto.stock }},{{ producto.descripcion }})" onkeypress="stock({{ producto.stock }},{{ producto.descripcion }})" onclick="stock({{ producto.stock }},{{ producto.descripcion }})" value="1" required></td>
							<td>
								<button type="button" class="btn btn-success" onclick="agregar({{ producto.id }},{{ producto.descripcion }})" data-dismiss="modal">+</button>
							</td>
						</tr>
					{% else %}
						<tr>
							<td colspan="8">no records found</td>
						</tr>
					{% endfor %}
					</tbody>
				</table>	
			</div>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>			
		  </div>
		</div>
	  </div>
	</div>

	{{ include('factura/_form.html.twig')}}

	{% block javascript %}
        <script src="{{ asset('js/productos.js') }}"></script>
    {% endblock %}

{% endblock %}